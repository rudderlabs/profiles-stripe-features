# This is a sample file, for detailed reference see: https://rudderlabs.github.io/pywht/
inputs:
  - name: rsStripeCustomers
    table: RUDDERSTACK_TEST_DB.data_apps_simulated_stripe.stripe_customers
    occurred_at_col: timestamp
    ids:
      - select: "customers_id"
        type: customer_id
        entity: user
  - name: rsStripeCharges
    table: RUDDERSTACK_TEST_DB.data_apps_simulated_stripe.stripe_charges
    occurred_at_col: created
    ids:
      - select: "customer"
        type: customer_id
        entity: user
      - select: "invoice"
        type: invoice_id
        entity: user
      - select: "charges_id"
        type: charge_id
        entity: user
      - select: "balance_transaction"
        type: balance_transaction_id
        entity: user
  - name: rsStripeInvoices
    table: RUDDERSTACK_TEST_DB.data_apps_simulated_stripe.stripe_invoices
    occurred_at_col: to_timestamp(created)
    ids:
      - select: "invoices_id"
        type: invoice_id
        entity: user
      - select: "customer"
        type: customer_id
        entity: user
  - name: rsStripeBalanceHistory
    table: RUDDERSTACK_TEST_DB.data_apps_simulated_stripe.stripe_balance_history
    occurred_at_col: created
    ids:
      - select: "id"
        type: balance_transaction_id
        entity: user
  - name: rsStripeSubscriptions
    table: RUDDERSTACK_TEST_DB.data_apps_simulated_stripe.stripe_subscriptions
    occurred_at_col: created
    ids:
      - select: "subscriptions_id"
        type: subscription_id
        entity: user
      - select: "customer"
        type: customer_id
        entity: user
  - name: rsStripeRefunds
    table: RUDDERSTACK_TEST_DB.data_apps_simulated_stripe.stripe_refunds
    occurred_at_col: created
    ids:
      - select: "charge"
        type: charge_id
        entity: user
      - select: "balance_transaction"
        type: balance_transaction_id
        entity: user
  # - name: stripeInvoicesView
  #   view: ANALYTICS_DB.DATA_APPS_SIMULATED_STRIPE.STG_INVOICES_DATA
  #   occurred_at_col: invoice_created_timestamp
  #   ids: 
  #     - select: "customer"
  #       type: customer_id
  #       entity: user
  - name: rsStripePlans
    table: RUDDERSTACK_TEST_DB.DATA_APPS_SIMULATED_STRIPE.STRIPE_PLANS
    occurred_at_col: created
    